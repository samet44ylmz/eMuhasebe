<app-blank pageName="Çalışan Çöp Kutusu" [routes]="['Kayıtlar','Çalışan Çöp Kutusu']">
    <app-section sectionTitle="Silinen Çalışanlar">
        <div class="form-group row">
            <div class="col-9">
                <!-- Removed "Seçilenleri Geri Yükle" button -->
                <button class="btn btn-danger" (click)="bulkDelete()" [disabled]="selectedEmployeeIds.length === 0">
                    <i class="fa-solid fa-trash me-1"></i>
                    Seçilenleri Kalıcı Olarak Sil
                </button>
                <button class="btn btn-secondary ms-2" (click)="goBack()">
                    <i class="fa-solid fa-arrow-left me-1"></i>
                    Geri
                </button>
            </div>

            <div class="col-3">
                <input [(ngModel)]="search" type="search" class="form-control" placeholder="Aranacak değer girin...">
            </div>
        </div>

        <div class="form-group mt-2">
            <table class="table table-hover">
                <thead>
                    <tr>
                        <th>
                            <input type="checkbox" [checked]="selectedEmployeeIds.length === deletedEmployees.length && deletedEmployees.length > 0" 
                                   (change)="selectAll()">
                        </th>
                        <th>#</th>
                        <th>Ad Soyad</th>
                        <th>TC Kimlik No</th>
                        <th>Telefon</th>
                        <th>Departman</th>
                        <th>Pozisyon</th>
                        <th>Maaş</th>
                        <th>İşe Başlama Tarihi</th>
                        <th>İşlemler</th>
                    </tr>
                </thead>
                <tbody>
                    @for(data of deletedEmployees | paginate: { itemsPerPage: 10, currentPage: p };track data){
                    <tr>
                        <td>
                            <input type="checkbox" [checked]="isSelected(data.id)" (change)="toggleSelection(data.id)">
                        </td>
                        <td>{{($index + 1)}}</td>
                        <td>{{data.name}}</td>
                        <td>{{data.identityNumber}}</td>
                        <td>{{data.phone}}</td>
                        <td>{{data.department}}</td>
                        <td>{{data.position}}</td>
                        <td>{{data.salary | trCurrency: '₺': true}}</td>
                        <td>{{data.startDate | date: 'dd.MM.yyyy'}}</td>
                        <td class="d-flex">
                            <button (click)="restoreEmployee(data)" class="btn btn-success btn-sm me-1" title="Geri Yükle">
                                <i class="fa-solid fa-rotate-left"></i>
                            </button>
                            <button (click)="permanentDeleteEmployee(data)" class="btn btn-danger btn-sm" title="Kalıcı Olarak Sil">
                                <i class="fa-solid fa-trash"></i>
                            </button>
                        </td>
                    </tr>
                    }
                    @if (deletedEmployees.length === 0) {
                    <tr>
                        <td colspan="10" class="text-center text-muted">Çöp kutusu boş</td>
                    </tr>
                    }
                </tbody>
            </table>
            <div class="text-center">
                <pagination-controls nextLabel="Sonraki" previousLabel="Önceki" (pageChange)="p = $event"></pagination-controls>
            </div>
        </div>
    </app-section>
</app-blank>